

springboot在现在的版本中操作Redis数据库用到了lettuce，而不是Jedis。
Jedis：以Redis命令作为方法名称，学习成本低，简单实用。但是Jedis实例是线程不安全的，多线程环境下需要基于连接池来使用。
Lettuce：是基于Netty实现的，支持同步、异步和响应式编程方式，并且是线程安全的。支持Redis的哨兵模式、集群模式和管道模式。



#### 整合redis
1、引入依赖
Spring Data Redis 默认使用的Lettuce
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>

<dependency>
     <groupId>org.apache.commons</groupId>
     <artifactId>commons-pool2</artifactId> 
 </dependency>
```
2、编写配置
application.yml配置文件配置redis相关配置
```yml
spring:
  redis:
    # Redis服务器地址
    host: 127.0.0.1
    # Redis服务器端口号
    port: 6381
    # 使用的数据库索引，默认是0
    database: 0
    # 连接超时时间
    timeout: 1800000
    # 设置密码
    #password: "123456"
    lettuce:
      pool:
        # 最大阻塞等待时间，负数表示没有限制
        max-wait: -1
        # 连接池中的最大空闲连接
        max-idle: 5
        # 连接池中的最小空闲连接
        min-idle: 2
        # 连接池中最大连接数，负数表示没有限制
        max-active: 20
```

3、注入StringRedisTemplate该类对象
```java
 @Autowired
 private StringRedisTemplate redisTemplate;
```

4、自定义序列化方式
对于set到redis的中文，在获取时是这样的：
```shell script
127.0.0.1:6381> get k1
"\xe4\xb8\xad\xe5\x9b\xbd"
```
这是因为使用默认的对象redisTemplate时，会把value值序列化为byte类型，导致可读性变差，
所以，我们需要使用序列化的工具类，来序列化和反序列化数据。



